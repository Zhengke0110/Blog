import{_ as l}from"./Post.14d9d5ce.js";import{u as c,c as r,w as p,o as i,a as n,b as e}from"./app.95384a36.js";const m='\u89E3\u51B3 "This package is ESM only" \u95EE\u9898',f="2025-10-21T00:00:00.000Z",v="zh",b=[{property:"og:title",content:'\u89E3\u51B3 "This package is ESM only" \u95EE\u9898'}],y={__name:"esm-solution",setup(u,{expose:t}){const s={title:'\u89E3\u51B3 "This package is ESM only" \u95EE\u9898',date:"2025-10-21T00:00:00.000Z",lang:"zh",meta:[{property:"og:title",content:'\u89E3\u51B3 "This package is ESM only" \u95EE\u9898'}]};return t({frontmatter:s}),c({title:'\u89E3\u51B3 "This package is ESM only" \u95EE\u9898',meta:[{property:"og:title",content:'\u89E3\u51B3 "This package is ESM only" \u95EE\u9898'}]}),(k,a)=>{const o=l;return i(),r(o,{frontmatter:s},{default:p(()=>[...a[0]||(a[0]=[n("div",{class:"prose m-auto"},[n("h2",{id:"\u95EE\u9898\u63CF\u8FF0",tabindex:"-1"},[e("\u95EE\u9898\u63CF\u8FF0 "),n("a",{class:"header-anchor",href:"#\u95EE\u9898\u63CF\u8FF0","aria-hidden":"true"},"#")]),n("p",null,[e("\u5728 Electron + Vite + Vue \u9879\u76EE\u4E2D\u5B89\u88C5 "),n("code",null,"@vitejs/plugin-vue"),e(" \u65F6\u9047\u5230\u4EE5\u4E0B\u9519\u8BEF\uFF1A")]),n("pre",{class:"language-bash"},[n("code",{class:"language-bash"},[e("\u2718 "),n("span",{class:"token punctuation"},"["),e("ERROR"),n("span",{class:"token punctuation"},"]"),e(),n("span",{class:"token string"},'"@vitejs/plugin-vue"'),e(" resolved to an ESM file. ESM "),n("span",{class:"token function"},"file"),e(" cannot be loaded by "),n("span",{class:"token variable"},[n("span",{class:"token variable"},"`"),e("require"),n("span",{class:"token variable"},"`")]),n("span",{class:"token builtin class-name"},"."),e(`
See https://vite.dev/guide/troubleshooting.html`),n("span",{class:"token comment"},"#this-package-is-esm-only for more details."),e(`
`)])]),n("pre",{class:"language-bash"},[n("code",{class:"language-bash"},[e("Build failed with "),n("span",{class:"token number"},"1"),e(` error:
ERROR: `),n("span",{class:"token punctuation"},"["),e("plugin: externalize-deps"),n("span",{class:"token punctuation"},"]"),e(),n("span",{class:"token string"},'"@vitejs/plugin-vue"'),e(` resolved to an ESM file.
ESM `),n("span",{class:"token function"},"file"),e(" cannot be loaded by "),n("span",{class:"token variable"},[n("span",{class:"token variable"},"`"),e("require"),n("span",{class:"token variable"},"`")]),n("span",{class:"token builtin class-name"},"."),e(" See https://vite.dev/guide/troubleshooting.html"),n("span",{class:"token comment"},"#this-package-is-esm-only for more details."),e(`
`)])]),n("h2",{id:"\u95EE\u9898\u539F\u56E0",tabindex:"-1"},[e("\u95EE\u9898\u539F\u56E0 "),n("a",{class:"header-anchor",href:"#\u95EE\u9898\u539F\u56E0","aria-hidden":"true"},"#")]),n("ul",null,[n("li",null,[n("code",null,"@vitejs/plugin-vue"),e(" \u662F\u4E00\u4E2A "),n("strong",null,"ESM-only"),e(" \u5305")]),n("li",null,[e("\u5728 Node.js \u226422 \u4E2D\uFF0CESM \u6587\u4EF6\u9ED8\u8BA4\u65E0\u6CD5\u901A\u8FC7 "),n("code",null,"require()"),e(" \u52A0\u8F7D")]),n("li",null,"Vite \u914D\u7F6E\u6587\u4EF6\u9ED8\u8BA4\u4F7F\u7528 CommonJS \u6A21\u5757\u7CFB\u7EDF\uFF0C\u65E0\u6CD5\u5BFC\u5165 ESM \u6A21\u5757")]),n("h2",{id:"\u5B98\u65B9\u89E3\u51B3\u65B9\u6848",tabindex:"-1"},[e("\u5B98\u65B9\u89E3\u51B3\u65B9\u6848 "),n("a",{class:"header-anchor",href:"#\u5B98\u65B9\u89E3\u51B3\u65B9\u6848","aria-hidden":"true"},"#")]),n("p",null,[e("\u6839\u636E "),n("a",{href:"https://vite.dev/guide/troubleshooting.html#this-package-is-esm-only",target:"_blank",rel:"noopener"},"Vite \u5B98\u65B9\u6587\u6863"),e("\uFF0C\u6709\u4E24\u79CD\u89E3\u51B3\u65B9\u6848\uFF1A")]),n("h3",{id:"\u65B9\u6848-1-\u6DFB\u52A0-type-module-\u5230-package-json",tabindex:"-1"},[e('\u65B9\u6848 1: \u6DFB\u52A0 "type": "module" \u5230 package.json '),n("a",{class:"header-anchor",href:"#\u65B9\u6848-1-\u6DFB\u52A0-type-module-\u5230-package-json","aria-hidden":"true"},"#")]),n("pre",{class:"language-json"},[n("code",{class:"language-json"},[n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token property"},'"type"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"module"'),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("h3",{id:"\u65B9\u6848-2-\u91CD\u547D\u540D\u914D\u7F6E\u6587\u4EF6\u4E3A-mjs-mts-\u6269\u5C55\u540D",tabindex:"-1"},[e("\u65B9\u6848 2: \u91CD\u547D\u540D\u914D\u7F6E\u6587\u4EF6\u4E3A .mjs/.mts \u6269\u5C55\u540D "),n("a",{class:"header-anchor",href:"#\u65B9\u6848-2-\u91CD\u547D\u540D\u914D\u7F6E\u6587\u4EF6\u4E3A-mjs-mts-\u6269\u5C55\u540D","aria-hidden":"true"},"#")]),n("ul",null,[n("li",null,[n("code",null,"vite.config.js"),e(" \u2192 "),n("code",null,"vite.config.mjs")]),n("li",null,[n("code",null,"vite.config.ts"),e(" \u2192 "),n("code",null,"vite.config.mts")])]),n("h2",{id:"\u6211\u4EEC\u91C7\u7528\u7684\u89E3\u51B3\u65B9\u6848",tabindex:"-1"},[e("\u6211\u4EEC\u91C7\u7528\u7684\u89E3\u51B3\u65B9\u6848 "),n("a",{class:"header-anchor",href:"#\u6211\u4EEC\u91C7\u7528\u7684\u89E3\u51B3\u65B9\u6848","aria-hidden":"true"},"#")]),n("p",null,[e("\u5BF9\u4E8E "),n("strong",null,"Electron + Vite"),e(" \u9879\u76EE\uFF0C\u6211\u4EEC\u9009\u62E9\u4E86 "),n("strong",null,"\u65B9\u6848 2"),e("\uFF0C\u539F\u56E0\uFF1A")]),n("ol",null,[n("li",null,[n("strong",null,"\u907F\u514D\u5168\u5C40\u5F71\u54CD"),e(": \u4E0D\u4F1A\u5F71\u54CD Electron \u4E3B\u8FDB\u7A0B\u7684 CommonJS \u6A21\u5757\u7CFB\u7EDF")]),n("li",null,[n("strong",null,"\u7CBE\u51C6\u89E3\u51B3"),e(": \u53EA\u9488\u5BF9 Vite \u914D\u7F6E\u6587\u4EF6\u4F7F\u7528 ESM")]),n("li",null,[n("strong",null,"\u517C\u5BB9\u6027\u66F4\u597D"),e(": \u4FDD\u6301\u9879\u76EE\u5176\u4ED6\u90E8\u5206\u7684\u6A21\u5757\u7CFB\u7EDF\u4E0D\u53D8")])]),n("h2",{id:"\u5B9E\u65BD\u6B65\u9AA4",tabindex:"-1"},[e("\u5B9E\u65BD\u6B65\u9AA4 "),n("a",{class:"header-anchor",href:"#\u5B9E\u65BD\u6B65\u9AA4","aria-hidden":"true"},"#")]),n("h3",{id:"\u7B2C\u4E00\u6B65-\u91CD\u547D\u540D-vite-\u914D\u7F6E\u6587\u4EF6",tabindex:"-1"},[e("\u7B2C\u4E00\u6B65: \u91CD\u547D\u540D Vite \u914D\u7F6E\u6587\u4EF6 "),n("a",{class:"header-anchor",href:"#\u7B2C\u4E00\u6B65-\u91CD\u547D\u540D-vite-\u914D\u7F6E\u6587\u4EF6","aria-hidden":"true"},"#")]),n("pre",{class:"language-bash"},[n("code",{class:"language-bash"},[n("span",{class:"token comment"},"# \u5C06 TypeScript \u914D\u7F6E\u6587\u4EF6\u91CD\u547D\u540D\u4E3A .mts"),e(`
`),n("span",{class:"token function"},"mv"),e(` vite.renderer.config.ts vite.renderer.config.mts
`)])]),n("h3",{id:"\u7B2C\u4E8C\u6B65-\u66F4\u65B0-electron-forge-\u914D\u7F6E",tabindex:"-1"},[e("\u7B2C\u4E8C\u6B65: \u66F4\u65B0 Electron Forge \u914D\u7F6E "),n("a",{class:"header-anchor",href:"#\u7B2C\u4E8C\u6B65-\u66F4\u65B0-electron-forge-\u914D\u7F6E","aria-hidden":"true"},"#")]),n("p",null,[e("\u5728 "),n("code",null,"forge.config.ts"),e(" \u4E2D\u66F4\u65B0\u914D\u7F6E\u6587\u4EF6\u5F15\u7528\uFF1A")]),n("pre",{class:"language-typescript"},[n("code",{class:"language-typescript"},[n("span",{class:"token comment"},"// \u4FEE\u6539\u524D"),e(`
renderer`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),e(`
  `),n("span",{class:"token punctuation"},"{"),e(`
    name`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},"'main_window'"),n("span",{class:"token punctuation"},","),e(`
    config`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},"'vite.renderer.config.ts'"),n("span",{class:"token punctuation"},","),e("  "),n("span",{class:"token comment"},"// \u65E7\u6587\u4EF6\u540D"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),e(`

`),n("span",{class:"token comment"},"// \u4FEE\u6539\u540E"),e(`
renderer`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),e(`
  `),n("span",{class:"token punctuation"},"{"),e(`
    name`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},"'main_window'"),n("span",{class:"token punctuation"},","),e(`
    config`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},"'vite.renderer.config.mts'"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token comment"},"// \u65B0\u6587\u4EF6\u540D"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
`),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),e(`
`)])]),n("h3",{id:"\u7B2C\u4E09\u6B65-\u9A8C\u8BC1\u914D\u7F6E",tabindex:"-1"},[e("\u7B2C\u4E09\u6B65: \u9A8C\u8BC1\u914D\u7F6E "),n("a",{class:"header-anchor",href:"#\u7B2C\u4E09\u6B65-\u9A8C\u8BC1\u914D\u7F6E","aria-hidden":"true"},"#")]),n("p",null,[n("code",null,"vite.renderer.config.mts"),e(" \u6587\u4EF6\u5185\u5BB9\uFF1A")]),n("pre",{class:"language-typescript"},[n("code",{class:"language-typescript"},[n("span",{class:"token keyword"},"import"),e(),n("span",{class:"token punctuation"},"{"),e(" defineConfig "),n("span",{class:"token punctuation"},"}"),e(),n("span",{class:"token keyword"},"from"),e(),n("span",{class:"token string"},'"vite"'),n("span",{class:"token punctuation"},";"),e(`
`),n("span",{class:"token keyword"},"import"),e(" vue "),n("span",{class:"token keyword"},"from"),e(),n("span",{class:"token string"},'"@vitejs/plugin-vue"'),n("span",{class:"token punctuation"},";"),e(),n("span",{class:"token comment"},"// \u73B0\u5728\u53EF\u4EE5\u6B63\u5E38\u5BFC\u5165 ESM \u6A21\u5757"),e(`

`),n("span",{class:"token comment"},"// https://vitejs.dev/config"),e(`
`),n("span",{class:"token keyword"},"export"),e(),n("span",{class:"token keyword"},"default"),e(),n("span",{class:"token function"},"defineConfig"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),e(`
  plugins`),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"["),n("span",{class:"token function"},"vue"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),e(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),e(`
`)])]),n("h2",{id:"\u7ED3\u679C\u9A8C\u8BC1",tabindex:"-1"},[e("\u7ED3\u679C\u9A8C\u8BC1 "),n("a",{class:"header-anchor",href:"#\u7ED3\u679C\u9A8C\u8BC1","aria-hidden":"true"},"#")]),n("p",null,[e("\u6267\u884C "),n("code",null,"npm start"),e(" \u547D\u4EE4\uFF0C\u5E94\u7528\u6210\u529F\u542F\u52A8\uFF0C\u4E0D\u518D\u51FA\u73B0 ESM \u76F8\u5173\u9519\u8BEF\u3002")]),n("h2",{id:"\u76F8\u5173\u6587\u4EF6\u6E05\u5355",tabindex:"-1"},[e("\u76F8\u5173\u6587\u4EF6\u6E05\u5355 "),n("a",{class:"header-anchor",href:"#\u76F8\u5173\u6587\u4EF6\u6E05\u5355","aria-hidden":"true"},"#")]),n("h3",{id:"\u65B0\u5EFA-\u4FEE\u6539\u7684\u6587\u4EF6",tabindex:"-1"},[e("\u65B0\u5EFA/\u4FEE\u6539\u7684\u6587\u4EF6 "),n("a",{class:"header-anchor",href:"#\u65B0\u5EFA-\u4FEE\u6539\u7684\u6587\u4EF6","aria-hidden":"true"},"#")]),n("ul",null,[n("li",null,[n("code",null,"vite.renderer.config.mts"),e(" (\u91CD\u547D\u540D\u81EA "),n("code",null,".ts"),e(")")]),n("li",null,[n("code",null,"forge.config.ts"),e(" (\u66F4\u65B0\u914D\u7F6E\u5F15\u7528)")]),n("li",null,[n("code",null,"src/App.vue"),e(" (Vue \u4E3B\u7EC4\u4EF6)")]),n("li",null,[n("code",null,"src/renderer.ts"),e(" (\u521D\u59CB\u5316 Vue \u5E94\u7528)")]),n("li",null,[n("code",null,"src/shims-vue.d.ts"),e(" (Vue TypeScript \u7C7B\u578B\u58F0\u660E)")]),n("li",null,[n("code",null,"index.html"),e(" (\u6DFB\u52A0 Vue \u6302\u8F7D\u70B9)")])]),n("h3",{id:"\u5B89\u88C5\u7684\u4F9D\u8D56",tabindex:"-1"},[e("\u5B89\u88C5\u7684\u4F9D\u8D56 "),n("a",{class:"header-anchor",href:"#\u5B89\u88C5\u7684\u4F9D\u8D56","aria-hidden":"true"},"#")]),n("pre",{class:"language-json"},[n("code",{class:"language-json"},[n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token property"},'"dependencies"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"vue"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"^3.x.x"'),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),e(`
  `),n("span",{class:"token property"},'"devDependencies"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"@vitejs/plugin-vue"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"^5.x.x"'),e(`
  `),n("span",{class:"token punctuation"},"}"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("h2",{id:"typescript-\u914D\u7F6E\u4F18\u5316",tabindex:"-1"},[e("TypeScript \u914D\u7F6E\u4F18\u5316 "),n("a",{class:"header-anchor",href:"#typescript-\u914D\u7F6E\u4F18\u5316","aria-hidden":"true"},"#")]),n("p",null,[e("\u540C\u65F6\u66F4\u65B0\u4E86 "),n("code",null,"tsconfig.json"),e(" \u4EE5\u652F\u6301\u73B0\u4EE3\u6A21\u5757\u89E3\u6790\uFF1A")]),n("pre",{class:"language-json"},[n("code",{class:"language-json"},[n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token property"},'"compilerOptions"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token property"},'"target"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"ESNext"'),n("span",{class:"token punctuation"},","),e(`
    `),n("span",{class:"token property"},'"module"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"ESNext"'),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token comment"},"// \u6539\u4E3A ESNext"),e(`
    `),n("span",{class:"token property"},'"moduleResolution"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"bundler"'),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token comment"},"// \u6539\u4E3A bundler"),e(`
    `),n("span",{class:"token property"},'"jsx"'),n("span",{class:"token operator"},":"),e(),n("span",{class:"token string"},'"preserve"'),e(),n("span",{class:"token comment"},"// \u652F\u6301 Vue JSX"),e(`
    `),n("span",{class:"token comment"},"// ... \u5176\u4ED6\u914D\u7F6E"),e(`
  `),n("span",{class:"token punctuation"},"}"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("h2",{id:"\u6700\u4F73\u5B9E\u8DF5\u5EFA\u8BAE",tabindex:"-1"},[e("\u6700\u4F73\u5B9E\u8DF5\u5EFA\u8BAE "),n("a",{class:"header-anchor",href:"#\u6700\u4F73\u5B9E\u8DF5\u5EFA\u8BAE","aria-hidden":"true"},"#")]),n("ol",null,[n("li",null,[n("strong",null,"\u4F18\u5148\u9009\u62E9\u65B9\u6848 2"),e(": \u5BF9\u4E8E\u6DF7\u5408\u6A21\u5757\u7CFB\u7EDF\u7684\u9879\u76EE\uFF08\u5982 Electron\uFF09\uFF0C\u91CD\u547D\u540D\u914D\u7F6E\u6587\u4EF6\u6BD4\u5168\u5C40\u8BBE\u7F6E\u66F4\u5B89\u5168")]),n("li",null,[n("strong",null,"\u4FDD\u6301\u4E00\u81F4\u6027"),e(": \u5982\u679C\u6709\u591A\u4E2A Vite \u914D\u7F6E\u6587\u4EF6\uFF0C\u90FD\u5E94\u8BE5\u91CD\u547D\u540D\u4E3A "),n("code",null,".mts")]),n("li",null,[n("strong",null,"\u66F4\u65B0\u5F15\u7528"),e(": \u8BB0\u5F97\u5728\u6240\u6709\u5F15\u7528\u914D\u7F6E\u6587\u4EF6\u7684\u5730\u65B9\u66F4\u65B0\u6587\u4EF6\u540D")]),n("li",null,[n("strong",null,"\u7248\u672C\u517C\u5BB9"),e(": \u786E\u4FDD\u4F7F\u7528\u7684 Node.js \u7248\u672C\u652F\u6301 ESM\uFF08\u5EFA\u8BAE Node.js 16+\uFF09")])]),n("h2",{id:"\u9879\u76EE\u73B0\u72B6",tabindex:"-1"},[e("\u9879\u76EE\u73B0\u72B6 "),n("a",{class:"header-anchor",href:"#\u9879\u76EE\u73B0\u72B6","aria-hidden":"true"},"#")]),n("p",null,"\u7ECF\u8FC7\u4E0A\u8FF0\u89E3\u51B3\u65B9\u6848\uFF0C\u9879\u76EE\u73B0\u5728\u5177\u5907\uFF1A"),n("ul",null,[n("li",null,"Electron \u684C\u9762\u5E94\u7528\u6846\u67B6"),n("li",null,"Vite \u73B0\u4EE3\u6784\u5EFA\u5DE5\u5177"),n("li",null,"Vue 3 \u54CD\u5E94\u5F0F\u6846\u67B6"),n("li",null,"TypeScript \u7C7B\u578B\u5B89\u5168"),n("li",null,"ESM \u6A21\u5757\u517C\u5BB9\u6027")]),n("hr"),n("p",null,[n("strong",null,"\u53C2\u8003\u8D44\u6599:")]),n("ul",null,[n("li",null,[n("a",{href:"https://vite.dev/guide/troubleshooting.html#this-package-is-esm-only",target:"_blank",rel:"noopener"},"Vite \u5B98\u65B9\u6545\u969C\u6392\u9664\u6587\u6863")]),n("li",null,[n("a",{href:"https://nodejs.org/docs/latest-v22.x/api/esm.html",target:"_blank",rel:"noopener"},"Node.js ESM \u6587\u6863")]),n("li",null,[n("a",{href:"https://www.electronforge.io/",target:"_blank",rel:"noopener"},"Electron Forge \u6587\u6863")])])],-1)])]),_:1})}}};export{f as date,y as default,v as lang,b as meta,m as title};
