import{_ as p}from"./Post.dd5dd46a.js";import{u as c,c as l,w as u,o as i,a as n,b as s}from"./app.038d67a7.js";var k="/images/blog/bpe/iShot_2025-11-20_15.09.21.png",r="/images/blog/bpe/iShot_2025-11-20_15.09.27.png",d="/images/blog/bpe/iShot_2025-11-20_15.51.54.png";const y="\u4F18\u5316\u539F\u59CB\u7684BPE",h="2025-11-20T00:00:00.000Z",f=!0,q="zh",L=[{property:"og:title",content:"\u4F18\u5316\u539F\u59CB\u7684BPE"}],x={__name:"bpe-trainer",setup(w,{expose:o}){const a={title:"\u4F18\u5316\u539F\u59CB\u7684BPE",date:"2025-11-20T00:00:00.000Z",draft:!0,lang:"zh",meta:[{property:"og:title",content:"\u4F18\u5316\u539F\u59CB\u7684BPE"}]};return o({frontmatter:a}),c({title:"\u4F18\u5316\u539F\u59CB\u7684BPE",meta:[{property:"og:title",content:"\u4F18\u5316\u539F\u59CB\u7684BPE"}]}),(g,t)=>{const e=p;return i(),l(e,{frontmatter:a},{default:u(()=>[...t[0]||(t[0]=[n("div",{class:"prose m-auto"},[n("h2",{id:"\u95EE\u9898\u80CC\u666F",tabindex:"-1"},[s("\u95EE\u9898\u80CC\u666F "),n("a",{class:"header-anchor",href:"#\u95EE\u9898\u80CC\u666F","aria-hidden":"true"},"#")]),n("p",null,[s("\u539F\u59CB BPE \u8BAD\u7EC3\u901F\u5EA6\uFF1A0.08 merge/s\uFF0812.6 \u79D2/merge\uFF09\uFF0C\u9884\u8BA1\u9700\u8981 69 \u5C0F\u65F6\u5B8C\u6210\u8BAD\u7EC3 "),n("img",{src:k,alt:"\u95EE\u9898\u80CC\u666F"})]),n("h2",{id:"\u6838\u5FC3\u4F18\u5316\u601D\u8DEF",tabindex:"-1"},[s("\u6838\u5FC3\u4F18\u5316\u601D\u8DEF "),n("a",{class:"header-anchor",href:"#\u6838\u5FC3\u4F18\u5316\u601D\u8DEF","aria-hidden":"true"},"#")]),n("p",null,'\u4ECE"\u5904\u7406\u6240\u6709\u5B9E\u4F8B"\u5230"\u5904\u7406\u552F\u4E00\u6A21\u5F0F+\u9891\u7387" - \u7ECF\u5178\u7684\u7A7A\u95F4\u6362\u65F6\u95F4\u7B56\u7565'),n("hr"),n("ol",null,[n("li",null,"\u8BCD\u9891\u5B57\u5178\u4EE3\u66FF\u5E8F\u5217\u5217\u8868\uFF1A \u5B58\u50A8\u91CF\u4ECE 100 \u4E07 \u2192 3 \u4E07")]),n("p",null,"\u4F18\u5316\u524D"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[s("sequences"),n("span",{class:"token punctuation"},":"),s(" List"),n("span",{class:"token punctuation"},"["),s("List"),n("span",{class:"token punctuation"},"["),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s("  "),n("span",{class:"token comment"},"# \u5B58\u50A8100\u4E07\u4E2A\u5355\u8BCD\u5E8F\u5217"),s(`
`),n("span",{class:"token keyword"},"for"),s(" word "),n("span",{class:"token keyword"},"in"),s(" words"),n("span",{class:"token punctuation"},":"),s(`
    sequences`),n("span",{class:"token punctuation"},"."),s("append"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("tokens"),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token comment"},"# \u6BCF\u4E2A\u91CD\u590D\u8BCD\u90FD\u5B58\u4E00\u904D"),s(`
`)])]),n("p",null,"\u4F18\u5316\u540E"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[s("word_freqs"),n("span",{class:"token punctuation"},":"),s(" Dict"),n("span",{class:"token punctuation"},"["),s("Tuple"),n("span",{class:"token punctuation"},"["),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token builtin"},"int"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s("  "),n("span",{class:"token comment"},"# \u53EA\u5B58\u552F\u4E00\u8BCD+\u9891\u7387"),s(`
`),n("span",{class:"token keyword"},"for"),s(" word "),n("span",{class:"token keyword"},"in"),s(" words"),n("span",{class:"token punctuation"},":"),s(`
    word_tokens `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token builtin"},"tuple"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"["),s("tokens"),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
    word_freqs`),n("span",{class:"token punctuation"},"["),s("word_tokens"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" word_freqs"),n("span",{class:"token punctuation"},"."),s("get"),n("span",{class:"token punctuation"},"("),s("word_tokens"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),s(`
`)])]),n("ol",{start:"2"},[n("li",null,"\u9891\u7387\u52A0\u6743\u7EDF\u8BA1\uFF1A\u7EDF\u8BA1\u901F\u5EA6\u63D0\u5347 30-40 \u500D")]),n("p",null,"\u4F18\u5316\u524D"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"get_stats"),n("span",{class:"token punctuation"},"("),s("sequences"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"for"),s(" seq "),n("span",{class:"token keyword"},"in"),s(" sequences"),n("span",{class:"token punctuation"},":"),s("  "),n("span",{class:"token comment"},"# \u904D\u5386100\u4E07\u6B21"),s(`
        `),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("seq"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
            pairs`),n("span",{class:"token punctuation"},"["),s("pair"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+="),s(),n("span",{class:"token number"},"1"),s("  "),n("span",{class:"token comment"},'# \u6BCF\u4E2A"the"\u90FD\u7D2F\u52A0\u4E00\u6B21'),s(`
`)])]),n("p",null,"\u4F18\u5316\u540E"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"get_stats"),n("span",{class:"token punctuation"},"("),s("word_freqs"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"for"),s(" word"),n("span",{class:"token punctuation"},","),s(" freq "),n("span",{class:"token keyword"},"in"),s(" word_freqs"),n("span",{class:"token punctuation"},"."),s("items"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s("  "),n("span",{class:"token comment"},"# \u53EA\u904D\u53863\u4E07\u6B21"),s(`
        `),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
            pairs`),n("span",{class:"token punctuation"},"["),s("pair"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+="),s(" freq  "),n("span",{class:"token comment"},'# "the"\u51FA\u73B010\u4E07\u6B21\uFF0C\u76F4\u63A5\u52A010\u4E07'),s(`
`)])]),n("ol",{start:"3"},[n("li",null,"\u9009\u62E9\u6027\u5408\u5E76\uFF1A\u6BCF\u6B21\u53EA\u5904\u7406 20-30%\u5305\u542B\u76EE\u6807 pair \u7684\u8BCD")]),n("p",null,"\u4F18\u5316\u524D"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[s("sequences "),n("span",{class:"token operator"},"="),s(" merge"),n("span",{class:"token punctuation"},"("),s("sequences"),n("span",{class:"token punctuation"},","),s(" best_pair"),n("span",{class:"token punctuation"},","),s(" new_token"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token comment"},"# \u904D\u5386\u6240\u6709100\u4E07\u5E8F\u5217"),s(`
`)])]),n("p",null,"\u4F18\u5316\u540E"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token keyword"},"for"),s(" word"),n("span",{class:"token punctuation"},","),s(" count "),n("span",{class:"token keyword"},"in"),s(" word_freqs"),n("span",{class:"token punctuation"},"."),s("items"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" best_pair"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token keyword"},"in"),s(" word "),n("span",{class:"token keyword"},"and"),s(" best_pair"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token keyword"},"in"),s(" word"),n("span",{class:"token punctuation"},":"),s("  "),n("span",{class:"token comment"},"# \u5148\u8FC7\u6EE4"),s(`
        new_word `),n("span",{class:"token operator"},"="),s(" merge_word"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},","),s(" best_pair"),n("span",{class:"token punctuation"},","),s(" new_token"),n("span",{class:"token punctuation"},")"),s(`
        new_word_freqs`),n("span",{class:"token punctuation"},"["),s("new_word"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(` count
    `),n("span",{class:"token keyword"},"else"),n("span",{class:"token punctuation"},":"),s(`
        new_word_freqs`),n("span",{class:"token punctuation"},"["),s("word"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(" count  "),n("span",{class:"token comment"},"# \u4E0D\u5305\u542B\u7684\u76F4\u63A5\u590D\u5236"),s(`
`)])]),n("ol",{start:"4"},[n("li",null,"\u4F7F\u7528 tuple \u4EE3\u66FF list\uFF1A\u67E5\u627E O(1) vs \u904D\u5386 O(n)\uFF0C\u652F\u6301\u9AD8\u6548\u53BB\u91CD")]),n("p",null,"\u4F18\u5316\u524D"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[s("sequences"),n("span",{class:"token punctuation"},":"),s(" List"),n("span",{class:"token punctuation"},"["),s("List"),n("span",{class:"token punctuation"},"["),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"]"),s("  "),n("span",{class:"token comment"},"# list\u4E0D\u53EF\u54C8\u5E0C"),s(`
`)])]),n("p",null,"\u4F18\u5316\u540E"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[s("word_freqs"),n("span",{class:"token punctuation"},":"),s(" Dict"),n("span",{class:"token punctuation"},"["),s("Tuple"),n("span",{class:"token punctuation"},"["),n("span",{class:"token builtin"},"str"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token builtin"},"int"),n("span",{class:"token punctuation"},"]"),s("  "),n("span",{class:"token comment"},"# tuple\u53EF\u505A\u5B57\u5178key"),s(`
`)])]),n("p",null,[n("img",{src:r,alt:"\u4F18\u5316"})]),n("h2",{id:"\u6027\u80FD\u5BF9\u6BD4",tabindex:"-1"},[s("\u6027\u80FD\u5BF9\u6BD4 "),n("a",{class:"header-anchor",href:"#\u6027\u80FD\u5BF9\u6BD4","aria-hidden":"true"},"#")]),n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"\u6307\u6807"),n("th",null,"\u4F18\u5316\u524D"),n("th",null,"\u4F18\u5316\u540E"),n("th",null,"\u63D0\u5347")])]),n("tbody",null,[n("tr",null,[n("td",null,"\u901F\u5EA6"),n("td",null,"0.08 merge/s"),n("td",null,"10.18 merge/s"),n("td",null,"127 \u500D")]),n("tr",null,[n("td",null,"\u5B8C\u6210\u65F6\u95F4"),n("td",null,"69 \u5C0F\u65F6"),n("td",null,"32 \u5206\u949F"),n("td",null,"129 \u500D")]),n("tr",null,[n("td",null,"\u5185\u5B58\u5360\u7528"),n("td",null,"~100 \u4E07\u5E8F\u5217"),n("td",null,"~3 \u4E07\u552F\u4E00\u8BCD"),n("td",null,"\u8282\u7701 97%")]),n("tr",null,[n("td",null,"\u7406\u8BBA\u590D\u6742\u5EA6"),n("td",null,"O(M\xD7N\xD7L)"),n("td",null,"O(M\xD7U\xD7L)"),n("td",null,"\u51CF\u5C11 33 \u500D")])])]),n("blockquote",null,[n("p",null,"\u5176\u4E2D\uFF1AM=merge \u6B21\u6570, N=\u603B\u8BCD\u6570, U=\u552F\u4E00\u8BCD\u6570, L=\u5E73\u5747\u8BCD\u957F")]),n("h2",{id:"\u7B97\u6CD5\u590D\u6742\u5EA6\u5206\u6790",tabindex:"-1"},[s("\u7B97\u6CD5\u590D\u6742\u5EA6\u5206\u6790 "),n("a",{class:"header-anchor",href:"#\u7B97\u6CD5\u590D\u6742\u5EA6\u5206\u6790","aria-hidden":"true"},"#")]),n("ul",null,[n("li",null,[s("\u4F18\u5316\u524D\uFF1A "),n("ul",null,[n("li",null,"\u6BCF\u6B21 merge: O(N \xD7 L) = 1 \u5343\u4E07\u6B21\u64CD\u4F5C"),n("li",null,"\u603B\u8BA1: O(M \xD7 N \xD7 L) = 2000 \u4EBF\u6B21\u64CD\u4F5C")])]),n("li",null,[s("\u4F18\u5316\u540E\uFF1A "),n("ul",null,[n("li",null,"\u6BCF\u6B21 merge: O(U \xD7 L) = 30 \u4E07\u6B21\u64CD\u4F5C"),n("li",null,"\u603B\u8BA1: O(M \xD7 U \xD7 L) = 60 \u4EBF\u6B21\u64CD\u4F5C")])])]),n("h2",{id:"\u4E8C\u6B21\u4F18\u5316",tabindex:"-1"},[s("\u4E8C\u6B21\u4F18\u5316 "),n("a",{class:"header-anchor",href:"#\u4E8C\u6B21\u4F18\u5316","aria-hidden":"true"},"#")]),n("p",null,"\u4F18\u5316\u524D\u7684\u95EE\u9898\uFF1A"),n("ul",null,[n("li",null,"\u6BCF\u6B21\u5408\u5E76\u540E\u90FD\u8981\u91CD\u65B0\u904D\u5386\u6240\u6709 word_freqs\uFF0C\u91CD\u65B0\u8BA1\u7B97\u6240\u6709 pair \u7684\u9891\u7387"),n("li",null,"\u65F6\u95F4\u590D\u6742\u5EA6\uFF1AO(vocab_size \xD7 total_words \xD7 avg_word_length)"),n("li",null,"\u5927\u91CF\u91CD\u590D\u8BA1\u7B97\uFF0C\u6548\u7387\u4F4E\u4E0B")]),n("p",null,"\u4F18\u5316\u540E\u7684\u65B9\u6848\uFF1A"),n("ul",null,[n("li",null,"\u53EA\u5728\u521D\u59CB\u5316\u65F6\u7EDF\u8BA1\u4E00\u6B21\u6240\u6709 pair \u9891\u7387 -\u6BCF\u6B21\u5408\u5E76\u53EA\u66F4\u65B0\u53D7\u5F71\u54CD\u7684\u8BCD"),n("li",null,"\u65F6\u95F4\u590D\u6742\u5EA6\uFF1AO(vocab_size \xD7 affected_words \xD7 avg_word_length)")]),n("p",null,"\u9884\u8BA1\u7B97 pair \u9891\u7387\u8868"),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token comment"},"# \u521D\u59CB\u5316\u65F6\u4E00\u6B21\u6027\u7EDF\u8BA1"),s(`
pair_counts `),n("span",{class:"token operator"},"="),s(" collections"),n("span",{class:"token punctuation"},"."),s("defaultdict"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"int"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"for"),s(" word"),n("span",{class:"token punctuation"},","),s(" freq "),n("span",{class:"token keyword"},"in"),s(" word_freqs"),n("span",{class:"token punctuation"},"."),s("items"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
        pair `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(" word"),n("span",{class:"token punctuation"},"["),s("i "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(`
        pair_counts`),n("span",{class:"token punctuation"},"["),s("pair"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+="),s(` freq
`)])]),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token comment"},"# \u627E\u51FA\u5305\u542Bbest_pair\u7684\u8BCD\uFF08\u800C\u4E0D\u662F\u6240\u6709\u8BCD\uFF09"),s(`
affected_words `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s(`
`),n("span",{class:"token keyword"},"for"),s(" word"),n("span",{class:"token punctuation"},","),s(" count "),n("span",{class:"token keyword"},"in"),s(" word_freqs"),n("span",{class:"token punctuation"},"."),s("items"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    has_pair `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},":"),s("i"),n("span",{class:"token operator"},"+"),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(" best_pair "),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"if"),s(" has_pair"),n("span",{class:"token punctuation"},":"),s(`
        affected_words`),n("span",{class:"token punctuation"},"."),s("append"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},","),s(" count"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token comment"},"# \u6B65\u9AA41: \u51CF\u53BB\u65E7\u8BCD\u7684pair\u9891\u7387"),s(`
`),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    pair_counts`),n("span",{class:"token punctuation"},"["),s("old_pair"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"-="),s(` count
    `),n("span",{class:"token keyword"},"if"),s(" pair_counts"),n("span",{class:"token punctuation"},"["),s("old_pair"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"<="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},":"),s(`
        `),n("span",{class:"token keyword"},"del"),s(" pair_counts"),n("span",{class:"token punctuation"},"["),s("old_pair"),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token comment"},"# \u6B65\u9AA42: \u5408\u5E76best_pair"),s(`
new_word `),n("span",{class:"token operator"},"="),s(" merge_word"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},","),s(" best_pair"),n("span",{class:"token punctuation"},","),s(" new_token"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"# \u6B65\u9AA43: \u6DFB\u52A0\u65B0\u8BCD\u7684pair\u9891\u7387"),s(`
`),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("new_word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    pair_counts`),n("span",{class:"token punctuation"},"["),s("new_pair"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"+="),s(` count
`)])]),n("pre",{class:"language-python"},[n("code",{class:"language-python"},[n("span",{class:"token comment"},"# \u4F18\u5316\u524D\uFF1A"),s(`
has_pair `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},"("),s(`
    word`),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(" best_pair"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token keyword"},"and"),s(" word"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token operator"},"+"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(" best_pair"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(`
    `),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"# \u4F18\u5316\u540E\uFF1A"),s(`
has_pair `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},":"),s("i"),n("span",{class:"token operator"},"+"),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"=="),s(" best_pair "),n("span",{class:"token keyword"},"for"),s(" i "),n("span",{class:"token keyword"},"in"),s(),n("span",{class:"token builtin"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("word"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("p",null,[n("img",{src:d,alt:"\u4F18\u5316"})])],-1)])]),_:1})}}};export{h as date,x as default,f as draft,q as lang,L as meta,y as title};
